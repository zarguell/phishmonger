---
phase: 19-editor-column-flexibility
plan: 04
type: execute
wave: 3
depends_on: [19-02]
files_modified:
  - src/App.tsx
autonomous: true
user_setup: []

must_haves:
  truths:
    - "Pressing 1 key focuses input column (full-width)"
    - "Pressing 2 key focuses preview column (full-width)"
    - "Pressing 3 key focuses lure-list column (full-width)"
    - "Pressing 4 key focuses scoring column (full-width)"
    - "Pressing the same key again resets to normal view (all columns visible)"
    - "Keyboard shortcuts work even when typing in input fields (enableOnFormTags: true)"
  artifacts:
    - path: "src/App.tsx"
      provides: "useHotkeys hooks for keys 1, 2, 3, 4"
      contains: "useHotkeys('1',"
  key_links:
    - from: "src/App.tsx"
      to: "toggleColumnFocus function"
      via: "useHotkeys callbacks"
      pattern: "useHotkeys\('1'.*toggleColumnFocus\('input'\)"
    - from: "src/App.tsx"
      to: "react-hotkeys-hook library"
      via: "import { useHotkeys }"
      pattern: "from 'react-hotkeys-hook'"
---

<objective>
Add keyboard shortcuts (1, 2, 3, 4) for column focus mode.

Purpose: Power users can quickly focus columns without clicking header buttons.
Output: Pressing 1-4 keys focuses corresponding column; pressing same key again resets view.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/19-editor-column-flexibility/19-RESEARCH.md
@src/App.tsx
@.planning/phases/19-editor-column-flexibility/19-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Register keyboard shortcuts for column focus</name>
  <files>src/App.tsx</files>
  <action>
    Add to src/App.tsx after existing useHotkeys calls (after line 248, after F1 help shortcut):

    Register 4 useHotkeys hooks for keys 1, 2, 3, 4:

    ```typescript
    // Keyboard shortcuts for column focus mode (keys 1-4)
    // Note: enableOnFormTags: true allows shortcuts even in text inputs
    useHotkeys('1', () => toggleColumnFocus('input'),
      { enableOnFormTags: true }, [toggleColumnFocus])

    useHotkeys('2', () => toggleColumnFocus('preview'),
      { enableOnFormTags: true }, [toggleColumnFocus])

    useHotkeys('3', () => toggleColumnFocus('lure-list'),
      { enableOnFormTags: true }, [toggleColumnFocus])

    useHotkeys('4', () => toggleColumnFocus('scoring'),
      { enableOnFormTags: true }, [toggleColumnFocus])
    ```

    IMPORTANT: enableOnFormTags: true is required per RESEARCH.md (line 321) to allow
    shortcuts to work even when user is typing in input fields. This is intentional - the
    number keys are primarily for column navigation, not for data entry.

    Follow existing useHotkeys pattern in App.tsx (lines 234-248 for undo/redo/F1).

    Note: toggleColumnFocus function was added in plan 19-01. If it doesn't exist yet,
    add it before the useHotkeys calls:
    ```typescript
    const toggleColumnFocus = (columnId: ColumnID) => {
      setFocusedColumn(prev => {
        if (prev === columnId) {
          return null // Reset to normal view
        }
        return columnId // Focus this column
      })
    }
    ```
  </action>
  <verify>grep -q "useHotkeys('1'" src/App.tsx && grep -q "useHotkeys('2'" src/App.tsx && grep -q "useHotkeys('3'" src/App.tsx && grep -q "useHotkeys('4'" src/App.tsx</verify>
  <done>Keyboard shortcuts 1-4 registered for column focus</done>
</task>

<task type="checkpoint:human-verify">
  <what-built>Complete column flexibility feature (UI + CSS + persistence + keyboard shortcuts)</what-built>
  <how-to-verify>
    1. Open application in browser (npm run dev)
    2. Test keyboard shortcuts:
       - Press 1: Input column expands to full width, others collapse
       - Press 1 again: Resets to normal view (all columns visible)
       - Press 2: Preview column expands
       - Press 3: Annotations list expands
       - Press 4: Scoring column expands
    3. Test UI buttons:
       - Click expand (+) button on each column header
       - Verify column expands to full width
       - Click minimize (-) button (if implemented)
    4. Test persistence:
       - Expand a column (press 1)
       - Refresh page (F5 or Cmd+R)
       - Verify same column is still expanded
       - Press 1 again to reset
       - Refresh page
       - Verify normal view restored
    5. Test with form input:
       - Focus the HTML input textarea
       - Press 1
       - Verify input column still focuses (enableOnFormTags: true working)
  </how-to-verify>
  <resume-signal>Type "approved" if all tests pass, or describe any issues</resume-signal>
</task>

</tasks>

<verification>
1. All 4 useHotkeys calls exist in App.tsx
2. Each calls toggleColumnFocus with correct columnId
3. enableOnFormTags: true is set on all shortcuts
4. TypeScript compiles: npm run type-check
5. Human verification confirms shortcuts work as expected
</verification>

<success_criteria>
1. Pressing 1-4 keys focuses corresponding column
2. Pressing same key again resets to normal view
3. Shortcuts work even when form inputs are focused
4. Column focus persists across page refresh
5. No browser console errors related to hotkeys
</success_criteria>

<output>
After completion, create `.planning/phases/19-editor-column-flexibility/19-04-SUMMARY.md`
</output>
