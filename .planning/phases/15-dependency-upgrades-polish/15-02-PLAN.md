---
phase: 15-dependency-upgrades-polish
plan: 02
type: execute
wave: 2
depends_on: [15-01]
files_modified:
  - package.json
  - package-lock.json
  - src/components/**/*.tsx
autonomous: false

must_haves:
  truths:
    - "React upgraded to v19.2.3 and react-dom to v19.2.3"
    - "@types/react upgraded to v19.2.9"
    - "@types/react-dom upgraded to v19.2.9"
    - "All UI components render without TypeScript errors"
    - "Dev server starts without React-related errors"
    - "No console warnings about deprecated React APIs"
  artifacts:
    - path: "package.json"
      provides: "React version declarations"
      contains: '"react": "^19.2.3"'
    - path: "package.json"
      provides: "React-DOM version declarations"
      contains: '"react-dom": "^19.2.3"'
    - path: "package.json"
      provides: "React type definitions"
      contains: '"@types/react": "^19.2.9"'
    - path: "src/components/**/*.tsx"
      provides: "UI components using React hooks"
      contains: "useState|useEffect|useRef|useMemo|useCallback"
  key_links:
    - from: "src/components/**/*.tsx"
      to: "react@19.2.3"
      via: "import React from 'react' or named imports"
      pattern: "import.*from ['\"]react['\"]"
    - from: "src/main.tsx"
      to: "react-dom@19.2.3"
      via: "createRoot API"
      pattern: "createRoot"
---

<objective>
Upgrade React to v19.2.3 and verify all components work correctly.

Purpose: React 18→19 is a low-risk upgrade for hook-based codebases. This codebase uses modern patterns (hooks, functional components, createRoot API) so minimal changes are expected.
Output: Modern React 19 with improved concurrent rendering and stricter type safety.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/15-dependency-upgrades-polish/15-RESEARCH.md
@.planning/phases/15-dependency-upgrades-polish/15-CONTEXT.md
@.planning/PROJECT.md
@.planning/ROADMAP.md
@package.json
@src/components/**/*.tsx
@src/main.tsx
</context>

<tasks>

<task type="auto">
  <name>Upgrade React monorepo to v19.2.3</name>
  <files>package.json</files>
  <action>
    1. Install React 19 runtime packages:
       npm install react@^19.2.3 react-dom@^19.2.3

    2. Install updated type definitions:
       npm install --save-dev @types/react@^19.2.9 @types/react-dom@^19.2.9

    3. Verify package.json shows correct versions:
       - "react": "^19.2.3"
       - "react-dom": "^19.2.3"
       - "@types/react": "^19.2.9"
       - "@types/react-dom": "^19.2.9"

    Note: This codebase already uses createRoot (not legacy ReactDOM.render), so no API changes needed.
  </action>
  <verify>grep -E '"react".*"19\.2\.3"' package.json && grep -E '"react-dom".*"19\.2\.3"' package.json && grep -E '"@types/react".*"19\.2\.9"' package.json</verify>
  <done>React monorepo at v19.2.3 with matching type definitions</done>
</task>

<task type="auto">
  <name>Verify TypeScript compilation after React upgrade</name>
  <files>src/components/**/*.tsx</files>
  <action>
    1. Run TypeScript compiler check: npx tsc --noEmit
    2. Fix any type errors related to React 19's stricter ref null checking
    3. Common fixes if needed:
       - Add null checks: ref.current?.scrollIntoView()
       - Use non-null assertion: useRef<HTMLDivElement>(null!)
       - Update ref type annotations

    Expected: Zero type errors. React 19 type changes are minimal for hook-based code.
  </action>
  <verify>npx tsc --noEmit && echo "TypeScript compilation successful"</verify>
  <done>TypeScript compilation passes with no errors</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>React 19 upgrade with all components verified for compilation</what-built>
  <how-to-verify>
    1. Start dev server: npm run dev
    2. Open browser to http://localhost:5173
    3. Check browser console for errors (F12 → Console tab)
    4. Test core UI workflows:
       - Create a new annotation (click "Add Lure" button)
       - Open Technique Library (click "Techniques" button)
       - Open Campaign Manager (click "Campaigns" button)
       - Toggle preview mode
       - Export PNG (click "Export PNG" button)
    5. Verify no console errors or warnings about React APIs

    Expected: All components render correctly, no console warnings.
  </how-to-verify>
  <resume-signal>Type "approved" if all UI components work correctly, or describe any issues</resume-signal>
</task>

</tasks>

<verification>
After completing all tasks:
1. package.json contains React 19.2.3 and react-dom 19.2.3
2. package.json contains @types/react 19.2.9 and @types/react-dom 19.2.9
3. TypeScript compilation passes (npx tsc --noEmit)
4. Dev server starts without React-related errors
5. All UI components render correctly (verified via checkpoint)
6. Browser console shows no React warnings or errors
</verification>

<success_criteria>
- React 19.2.3 installed with matching type definitions
- All components compile without TypeScript errors
- Dev server and all UI workflows work correctly
- No console errors or warnings related to React
</success_criteria>

<output>
After completion, create `.planning/phases/15-dependency-upgrades-polish/15-02-SUMMARY.md`
</output>
