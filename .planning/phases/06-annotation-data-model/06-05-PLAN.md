---
phase: 06-annotation-data-model
plan: 05
type: execute
wave: 1
depends_on: []
files_modified: ["src/components/annotation/AnnotationCard.tsx", "src/index.css"]
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Each annotation card displays a numbered badge (1, 2, 3...) in the visualizer"
    - "The numbered badge is clearly visible and matches the lure numbering"
    - "Badge appears as an orange circular element in the card header"
  artifacts:
    - path: "src/components/annotation/AnnotationCard.tsx"
      provides: "Numbered badge rendering in card header"
      contains: "annotationNumber && <span className=\"annotation-card-number-badge\">"
    - path: "src/index.css"
      provides: "Numbered badge styling"
      contains: ".annotation-card-number-badge"
  key_links:
    - from: "src/components/preview/AnnotationColumn.tsx"
      to: "src/components/annotation/AnnotationCard.tsx"
      via: "annotationNumber prop"
      pattern: "annotationNumber=\{index \+ 1\}"
    - from: "src/components/annotation/AnnotationCard.tsx"
      to: "src/index.css"
      via: "className application"
      pattern: "className=\"annotation-card-number-badge\""
---

<objective>
[Restore numbered annotation badges in visualizer cards]

Purpose: Fix missing numbered markers that identify annotations in the visualizer - these badges were present in Phase 3 but lost during Phase 6 updates
Output: Annotation cards display numbered badges (1, 2, 3...) matching lure numbering
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/phases/03-visualizer-export/03-visualizer-export-VERIFICATION.md
@.planning/phases/06-annotation-data-model/06-annotation-data-model-VERIFICATION.md

@src/components/annotation/AnnotationCard.tsx
@src/components/preview/AnnotationColumn.tsx
@src/index.css
</context>

<tasks>

<task type="auto">
  <name>Add numbered badge rendering to AnnotationCard</name>
  <files>src/components/annotation/AnnotationCard.tsx</files>
  <action>Add destructuring for annotationNumber prop in AnnotationCard function parameters, then add conditional rendering of numbered badge span at the top of the card content (before title). Use className="annotation-card-number-badge" and display the number.</action>
  <verify>AnnotationCard.tsx contains the badge rendering code with proper conditional check</verify>
  <done>annotationNumber prop is destructured and badge span is rendered when annotationNumber exists</done>
</task>

<task type="auto">
  <name>Add numbered badge CSS styling</name>
  <files>src/index.css</files>
  <action>Add .annotation-card-number-badge CSS rule with orange background, white text, circular shape (24px diameter), positioned as inline-block with margin-right for spacing.</action>
  <verify>index.css contains .annotation-card-number-badge styling with orange background and circular dimensions</verify>
  <done>Badge styling matches Phase 3 specification (24px orange circle with white text)</done>
</task>

</tasks>

<verification>
Run the application in preview mode and verify numbered badges appear on annotation cards (1, 2, 3...) matching the lure numbering in the email preview.
</verification>

<success_criteria>
Annotation cards display numbered circular badges that identify each annotation in the visualizer.
</success_criteria>

<output>
After completion, create `.planning/phases/06-annotation-data-model/{phase}-{plan}-SUMMARY.md`
</output>