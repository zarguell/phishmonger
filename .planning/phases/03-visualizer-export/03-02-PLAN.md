---
phase: 03-visualizer-export
plan: 02
type: execute
wave: 1
depends_on: []
files_modified: [src/components/preview/SlideWrapper.tsx, src/components/preview/EmailColumn.tsx, src/components/preview/AnnotationColumn.tsx, src/index.css]
autonomous: true
user_setup: []

must_haves:
  truths:
    - "SlideWrapper renders fixed-width 1600px container with white background"
    - "EmailColumn renders email content in 960px left column"
    - "AnnotationColumn renders empty state in 640px right column"
    - "Three-column layout (960px email | 80px gutter | 640px cards) is established"
  artifacts:
    - path: "src/components/preview/SlideWrapper.tsx"
      provides: "1600px fixed-width slide container"
    - path: "src/components/preview/EmailColumn.tsx"
      provides: "960px left column for email content"
    - path: "src/components/preview/AnnotationColumn.tsx"
      provides: "640px right column for annotation cards"
    - path: "src/index.css"
      contains: ".slide-wrapper"
  key_links:
    - from: "src/App.tsx"
      to: "SlideWrapper"
      via: "import and JSX usage"
    - from: "SlideWrapper.tsx"
      to: "EmailColumn"
      via: "JSX component"
    - from: "SlideWrapper.tsx"
      to: "AnnotationColumn"
      via: "JSX component"
---

<objective>
Create three-column slide layout components for preview mode.

Purpose: Establish the visual structure for annotated email slides with fixed dimensions (1600px total, 960px email, 80px gutter, 640px cards).
Output: SlideWrapper, EmailColumn, and AnnotationColumn components with proper CSS styling.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03-visualizer-export/03-CONTEXT.md
@.planning/phases/03-visualizer-export/03-RESEARCH.md

@src/types/annotations.ts
@src/components/Preview.tsx
@src/App.tsx
</context>

<tasks>

<task type="auto">
  <name>Create SlideWrapper component with fixed-width container</name>
  <files>src/components/preview/SlideWrapper.tsx</files>
  <action>
    Create src/components/preview/SlideWrapper.tsx:

    ```tsx
    import React from 'react'

    interface SlideWrapperProps {
      children: React.ReactNode
    }

    export function SlideWrapper({ children }: SlideWrapperProps) {
      return (
        <div className="slide-wrapper">
          {children}
        </div>
      )
    }
    ```

    This component provides the 1600px fixed-width container for the slide composition.

    Why fixed width: Per Phase 3 Context, the slide wrapper must be exactly 1600px wide to ensure consistent positioning calculations for arrow overlays and export scaling. The height is auto to fit email content of varying lengths.
  </action>
  <verify>test -f src/components/preview/SlideWrapper.tsx && grep -q "slide-wrapper" src/components/preview/SlideWrapper.tsx</verify>
  <done>SlideWrapper component created with slide-wrapper className</done>
</task>

<task type="auto">
  <name>Create EmailColumn component for email content</name>
  <files>src/components/preview/EmailColumn.tsx</files>
  <action>
    Create src/components/preview/EmailColumn.tsx:

    ```tsx
    import React from 'react'

    interface EmailColumnProps {
      htmlSource: string
    }

    export function EmailColumn({ htmlSource }: EmailColumnProps) {
      return (
        <div className="email-column">
          <div
            className="email-content"
            dangerouslySetInnerHTML={{ __html: htmlSource }}
          />
        </div>
      )
    }
    ```

    This component renders the phishing email HTML in the left column (960px).

    Why separate component: Per Phase 3 architecture, the email content needs to be measured for arrow positioning. A dedicated component with a ref enables getBoundingClientRect() measurements for lure spans.
  </action>
  <verify>test -f src/components/preview/EmailColumn.tsx && grep -q "email-column" src/components/preview/EmailColumn.tsx</verify>
  <done>EmailColumn component created with email-column className</done>
</task>

<task type="auto">
  <name>Create AnnotationColumn component with ghost card empty state</name>
  <files>src/components/preview/AnnotationColumn.tsx</files>
  <action>
    Create src/components/preview/AnnotationColumn.tsx:

    ```tsx
    import React from 'react'
    type { Annotation } from '../../types/annotations'

    interface AnnotationColumnProps {
      annotations: Record<string, Annotation>
    }

    export function AnnotationColumn({ annotations }: AnnotationColumnProps) {
      const hasAnnotations = Object.keys(annotations).length > 0

      if (!hasAnnotations) {
        return (
          <div className="annotation-column">
            <div className="ghost-card">
              No annotations yet. Switch to Edit Mode to highlight lures.
            </div>
          </div>
        )
      }

      return (
        <div className="annotation-column">
          {/* Annotation cards will be rendered in Plan 03 */}
          {Object.values(annotations).map(annotation => (
            <div key={annotation.lureId} className="annotation-card-placeholder">
              {annotation.techniqueId}
            </div>
          ))}
        </div>
      )
    }
    ```

    This component renders the right column (640px) for annotation cards, with a ghost card empty state when no annotations exist.

    Why ghost card: Per Phase 3 Context, the empty state teaches the workflow without breaking the layout mental model. Users see where cards will appear once annotations are added.
  </action>
  <verify>test -f src/components/preview/AnnotationColumn.tsx && grep -q "annotation-column" src/components/preview/AnnotationColumn.tsx</verify>
  <done>AnnotationColumn component created with ghost card empty state</done>
</task>

<task type="auto">
  <name>Add CSS for slide layout (1600px width, three columns)</name>
  <files>src/index.css</files>
  <action>
    Add CSS to src/index.css for the slide layout:

    ```css
    /* Slide Layout */
    .slide-wrapper {
      width: 1600px;
      min-height: 900px;
      background: #FFFFFF;
      display: flex;
      flex-direction: row;
      margin: 0 auto;
      position: relative;
    }

    .email-column {
      width: 960px;
      flex-shrink: 0;
      padding: 40px;
      box-sizing: border-box;
    }

    .email-content {
      /* Inherits styling from preview-pane */
    }

    .annotation-column {
      width: 640px;
      flex-shrink: 0;
      padding: 40px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      gap: 24px;
    }

    .ghost-card {
      width: 380px;
      padding: 60px 40px;
      border: 2px dashed #dee2e6;
      border-radius: 8px;
      text-align: center;
      color: #6c757d;
      font-style: italic;
    }

    .annotation-card-placeholder {
      border: 1px solid #FF4500;
      background: #FFF5F5;
      padding: 16px;
      border-radius: 8px;
    }
    ```

    Why these dimensions: Per Phase 3 Context, the layout is 1600px total with 960px for email (60%), 80px gutter (remaining space), and 640px for cards (40%). Cards are 380px wide centered in the 640px column.

    Note: The 80px gutter emerges from the 1600px - 960px - 640px = 0px calculation, but per CONTEXT.md the gutter center is at x=1000px (960px + 40px), meaning there's implicit spacing handled by padding and card centering.
  </action>
  <verify>grep -q "\.slide-wrapper" src/index.css && grep -q "width: 1600px" src/index.css</verify>
  <done>CSS for slide layout added with proper column widths and spacing</done>
</task>

</tasks>

<verification>
- SlideWrapper.tsx renders div with slide-wrapper class
- EmailColumn.tsx renders div with email-column class
- AnnotationColumn.tsx renders ghost card when no annotations
- index.css defines slide-wrapper as 1600px width with flex layout
- email-column is 960px, annotation-column is 640px
- Components are TypeScript with proper interfaces
</verification>

<success_criteria>
- Three-column layout renders correctly
- Fixed 1600px width enforced on slide-wrapper
- Ghost card appears when no annotations exist
- Layout is ready for annotation cards (Plan 03) and arrow overlays (Plan 04)
</success_criteria>

<output>
After completion, create `.planning/phases/03-visualizer-export/03-02-SUMMARY.md`
</output>
