---
phase: 10-campaign-manager-ui
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/campaign/CampaignCard.tsx
  - src/components/campaign/CampaignPhishItem.tsx
autonomous: true

must_haves:
  truths:
    - "User can see campaign name, description, and phish count in card"
    - "User can see date range for campaign with scheduled phishes"
    - "User can edit, delete, or export campaign from card actions"
    - "User can see phish title and scheduled date in phish item"
    - "User can change scheduled date using date picker"
    - "User can remove phish from campaign"
  artifacts:
    - path: "src/components/campaign/CampaignCard.tsx"
      provides: "Campaign display card with actions"
      exports: ["CampaignCard"]
      min_lines: 50
    - path: "src/components/campaign/CampaignPhishItem.tsx"
      provides: "Phish row with date picker and remove"
      exports: ["CampaignPhishItem"]
      min_lines: 40
  key_links:
    - from: "CampaignCard.tsx"
      to: "src/types/campaign.ts"
      via: "import type { Campaign }"
      pattern: "import.*Campaign.*from.*campaign"
    - from: "CampaignPhishItem.tsx"
      to: "src/types/campaign.ts"
      via: "import type { CampaignPhish }"
      pattern: "import.*CampaignPhish.*from.*campaign"
---

<objective>
Build the core display components for campaign UI: CampaignCard for showing campaign summaries in a grid, and CampaignPhishItem for showing individual phishes within the campaign editor.

Purpose: These are the foundational visual components that all other campaign UI will compose. They need to be self-contained, follow existing card patterns from TechniqueLibrary, and handle the display logic for campaign metadata and scheduling.

Output: Two reusable React components - CampaignCard for campaign list display, and CampaignPhishItem for campaign editor phish rows.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-campaign-manager-ui/10-RESEARCH.md
@.planning/phases/10-campaign-manager-ui/10-CONTEXT.md
@.planning/phases/09-campaign-data-model/09-01-SUMMARY.md

@src/types/campaign.ts
@src/components/library/TechniqueLibrary.tsx
@src/hooks/useCampaigns.ts
</context>

<tasks>

<task type="auto">
  <name>Create CampaignCard component with campaign display and actions</name>
  <files>src/components/campaign/CampaignCard.tsx</files>
  <action>
    Create CampaignCard component following TechniqueLibrary.tsx card pattern:

    Props interface:
    - campaign: Campaign (from src/types/campaign.ts)
    - onEdit: () => void
    - onDelete: () => void
    - onExport: () => void

    Display:
    - Campaign name as h3
    - Description (if present) as paragraph below name
    - Phish count ("X phish" or "1 phish")
    - Date range calculated from campaign.campaignPhishes:
      * Filter phishes with scheduledDate
      * If no dates: show "No dates set"
      * If one date: show that date in readable format (e.g., "Mar 15, 2026")
      * If multiple dates: show "Start - End (X days)" range
    - Action buttons: Edit (primary), Delete (danger style), Export (secondary)

    Styling:
    - Follow TechniqueLibrary TechniqueCard inline style pattern
    - Border: 1px solid #e1e5e9
    - Border radius: 8px
    - Padding: 16px
    - Background: white
    - Hover: slight shadow transition
    - Buttons: Edit (blue #0066cc), Delete (red #cc0000 with light red bg), Export (gray #6c757d)

    Date calculation helper (within component):
    - Parse ISO 8601 strings from scheduledDate
    - Use toLocaleDateString for readable format
    - Calculate day difference: Math.ceil((end - start) / msPerDay)

    DO NOT use any external date libraries - use native Date API only.
  </action>
  <verify>
    File exists at src/components/campaign/CampaignCard.tsx with:
    - CampaignCard component exported
    - Props interface with campaign, onEdit, onDelete, onExport
    - Date range calculation logic for scheduled phishes
    - Action buttons for Edit, Delete, Export
  </verify>
  <done>
    CampaignCard component renders campaign summary with name, description, phish count, date range, and action buttons. Date range correctly calculates from scheduled phish dates.
  </done>
</task>

<task type="auto">
  <name>Create CampaignPhishItem component with date picker and remove</name>
  <files>src/components/campaign/CampaignPhishItem.tsx</files>
  <action>
    Create CampaignPhishItem component for displaying a single phish in the campaign editor:

    Props interface:
    - phish: CampaignPhish (from src/types/campaign.ts)
    - onDateChange: (phishId: string, date: string | undefined) => void
    - onRemove: (phishId: string) => void

    Display:
    - Phish title from phish.metadata.title (fallback to "Untitled Phish")
    - Scheduled date input:
      * Use native <input type="date">
      * Value: phish.scheduledDate || '' (convert ISO string to YYYY-MM-DD format if present)
      * onChange: Extract date from e.target.value, pass to onDateChange
    - Remove button:
      * X icon or "Remove" text
      * Danger styling (red border/text)
      * Calls onRemove(phish.id)

    Styling:
    - Flex row layout
    - Border bottom: 1px solid #e1e5e9
    - Padding: 12px
    - Align items: center
    - Title: flex: 1
    - Date input: padding 6px 12px, border 1px solid #d1d5db, border-radius 4px
    - Remove button: padding 6px 12px, red styling

    Date format conversion helper:
    - Input to storage: Pass date string as-is (YYYY-MMDD format is valid ISO date)
    - Storage to input: Extract date portion from ISO string with split('T')[0]

    DO NOT use external date libraries - native input type="date" handles validation.
  </action>
  <verify>
    File exists at src/components/campaign/CampaignPhishItem.tsx with:
    - CampaignPhishItem component exported
    - Props interface with phish, onDateChange, onRemove
    - Native date input for scheduledDate
    - Remove button with danger styling
  </verify>
  <done>
    CampaignPhishItem component renders phish title, editable date picker, and remove button. Date changes and remove actions trigger provided callbacks.
  </done>
</task>

</tasks>

<verification>
1. Both components compile without TypeScript errors
2. CampaignCard correctly calculates date range from campaign phishes
3. CampaignPhishItem uses native date input with proper change handling
4. Both components follow existing inline style patterns from TechniqueLibrary
5. No external dependencies added (no date libraries, no component libraries)
</verification>

<success_criteria>
1. CampaignCard displays campaign name, description, phish count, and calculated date range
2. CampaignCard has Edit, Delete, and Export action buttons
3. CampaignPhishItem displays phish title, date picker, and remove button
4. Date picker correctly handles ISO 8601 date strings
5. Both components are ready to be imported by parent components
</success_criteria>

<output>
After completion, create `.planning/phases/10-campaign-manager-ui/10-01-SUMMARY.md`
</output>
