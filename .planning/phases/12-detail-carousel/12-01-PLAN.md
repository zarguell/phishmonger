---
phase: 12-detail-carousel
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/campaign/CampaignCarousel.tsx
  - src/components/campaign/CarouselCard.tsx
autonomous: true

must_haves:
  truths:
    - "User can view campaign phishes in horizontal scrollable carousel"
    - "Carousel cards display screenshot thumbnail, title, scheduled date, and annotation count"
    - "Scroll snaps to each card for predictable navigation"
  artifacts:
    - path: "src/components/campaign/CampaignCarousel.tsx"
      provides: "Main carousel container with scroll snap and navigation"
      min_lines: 80
      exports: ["CampaignCarousel"]
    - path: "src/components/campaign/CarouselCard.tsx"
      provides: "Individual phish card with thumbnail, metadata, and annotation count"
      min_lines: 60
      exports: ["CarouselCard"]
  key_links:
    - from: "CampaignCarousel.tsx"
      to: "src/types/campaign.ts"
      via: "Campaign, CampaignPhish type imports"
      pattern: "import.*Campaign.*from.*types/campaign"
    - from: "CampaignCarousel.tsx"
      to: "CampaignCard.tsx"
      via: "Component composition and click callback"
      pattern: "onCardClick|onClick"
---

<objective>
Create horizontal carousel container with CSS scroll snap for browsing campaign phishes

Purpose: Enable visual browsing of campaign phishes without leaving campaign context using native browser APIs for performance
Output: CampaignCarousel component with horizontal scroll, snap points, and card display
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-detail-carousel/12-CONTEXT.md
@.planning/phases/12-detail-carousel/12-RESEARCH.md

@src/types/campaign.ts
@src/components/campaign/CampaignCard.tsx
@src/components/campaign/CampaignManager.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create CarouselCard component with thumbnail and metadata</name>
  <files>src/components/campaign/CarouselCard.tsx</files>
  <action>
Create CarouselCard component for individual phish display in carousel:

Props interface:
- phish: CampaignPhish
- onClick: () => void
- isSelected?: boolean (for border highlight styling)

Card structure:
- Container: 200px fixed width, flex: 0 0 200px (won't grow/shrink)
- Thumbnail area: Square aspect ratio (1:1), contains placeholder or screenshot
- Metadata section: Title + scheduled date + annotation count below thumbnail
- Border: 2px solid transparent, changes to #007bff when isSelected=true

Styling (following CONTEXT.md decisions):
- Card width: 200px compact
- Screenshot on top, text section below
- Square thumbnail (aspectRatio: '1/1', objectFit: 'cover')
- Selected state: Blue border (#007bff) per decision
- Hover: Subtle shadow using GPU-accelerated transform (not box-shadow animation)
- Transition: 0.2s ease on border-color and transform

Thumbnail handling (per RESEARCH.md open questions):
- Use placeholder icon (ðŸ“§ or ðŸŽ£) centered in card when no screenshot available
- Gray background (#f3f4f6) for placeholder area
- onError handler to swap to placeholder if image load fails

Metadata display:
- Title: truncate with ellipsis if overflow (max 2 lines)
- Scheduled date: formatted as "MMM DD, YYYY" if present, otherwise "No date set"
- Annotation count: display count with badge styling (e.g., "3 annotations" or "3" in small badge)
  - Show count from phish.annotations.length
  - Badge styling: small, gray background, rounded corners, positioned below date
  - If no annotations: show "0 annotations" or omit entirely
- Font sizes: 14px for title, 12px for date and annotation count
- Color: #333 for title, #666 for date and annotation count

Follow inline styles pattern from CampaignCard.tsx:
- No external CSS files
- All styles via style={{}} props
- onMouseEnter/onMouseLeave for hover states
</action>
  <verify>
File exists, exports CarouselCard, accepts phish/onClick/isSelected props, displays annotation count from phish.annotations.length
</verify>
  <done>
CarouselCard renders with thumbnail placeholder, title, date, annotation count, and clickable interaction
</done>
</task>

<task type="auto">
  <name>Task 2: Create CampaignCarousel with horizontal scroll and snap</name>
  <files>src/components/campaign/CampaignCarousel.tsx</files>
  <action>
Create CampaignCarousel component for horizontal scrolling:

Props interface:
- campaign: Campaign
- onCardClick: (phish: CampaignPhish) => void

State:
- scrollContainerRef: useRef<HTMLDivElement> for scroll access
- selectedPhishId: string | null for tracking selected card

Scroll container styling (per RESEARCH.md Pattern 1):
- display: 'flex'
- overflowX: 'scroll'
- scrollSnapType: 'x mandatory'
- gap: '16px'
- padding: '16px'
- scrollbarWidth: 'none' (Firefox)
- msOverflowStyle: 'none' (IE/Edge)
- Hide scrollbar with CSS: '&::-webkit-scrollbar { display: none; }' via style tag

Navigation buttons:
- Prev button: Absolute positioned left, triggers scrollLeft
- Next button: Absolute positioned right, triggers scrollRight
- Scroll amount: container.clientWidth * 0.8 (80% of viewport)
- behavior: 'smooth' for smooth scrolling

Card rendering:
- Map campaign.campaignPhishes to CarouselCard components
- Pass isSelected={phish.id === selectedPhishId}
- onClick sets selectedPhishId and calls onCardClick(phish)

Click handling:
- Card click sets selectedPhishId state
- Calls onCardClick(phish) callback for parent integration
- Click also calls scrollIntoView() to bring clicked card into view

Handle empty campaign:
- Show centered message: "No phishes in this campaign"
- Gray text, padding, empty state UI

Follow modal overlay pattern from CampaignManager.tsx for layout structure
Use useRef + scrollBy pattern from RESEARCH.md Pattern 2 for navigation
</action>
  <verify>
File exists, exports CampaignCarousel, implements scroll snap, prev/next navigation, card rendering
</verify>
  <done>
CampaignCarousel scrolls horizontally, snaps to cards, prev/next buttons work, cards clickable
</done>
</task>

</tasks>

<verification>
1. CampaignCarousel component accepts campaign and onCardClick props
2. Horizontal scroll works with mouse/touch drag
3. Scroll snaps to each card position (no partial stops between cards)
4. Prev/Next buttons scroll by ~80% of viewport width
5. CarouselCard displays thumbnail placeholder, title, scheduled date, and annotation count
6. Selected card shows blue border (#007bff)
7. Hover state shows elevation effect
8. Empty campaign shows appropriate message
9. No external dependencies - all native React/CSS
</verification>

<success_criteria>
1. User can scroll horizontally through campaign phishes
2. Scroll snaps predictably to each card
3. Cards display phish metadata (title, date, annotation count)
4. Navigation buttons work for controlled scrolling
5. Component follows existing inline style patterns
</success_criteria>

<output>
After completion, create `.planning/phases/12-detail-carousel/12-01-SUMMARY.md`
</output>
