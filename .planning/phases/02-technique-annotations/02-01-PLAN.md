---
phase: 02-technique-annotations
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [src/data/techniques.json, src/types/annotations.ts]
autonomous: true
user_setup: []

must_haves:
  truths:
    - "Static technique library JSON contains 12 MITRE ATT&CK techniques"
    - "Annotation type defines lureId, techniqueName, mitreAttackId, explanation fields"
    - "Technique library includes T1566.001 through T1078.002 from MITRE ATT&CK"
  artifacts:
    - path: "src/data/techniques.json"
      provides: "Static library of 12 common phishing techniques"
      min_lines: 50
      contains: "T1566.001"
    - path: "src/types/annotations.ts"
      provides: "TypeScript type definitions for annotation data structures"
      exports: ["Annotation"]
  key_links:
    - from: "src/types/annotations.ts"
      to: "src/data/techniques.json"
      via: "Type annotations reference technique structure"
      pattern: "interface Annotation"
---

<objective>
Create the data foundation for technique annotations: a static JSON library of 12 common phishing techniques from MITRE ATT&CK, and TypeScript types defining the annotation data structure.

Purpose: Establish type-safe data structures that components can import and use throughout the application.
Output: technique library JSON file and annotation type definitions.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@.planning/phases/02-technique-annotations/02-RESEARCH.md
@.planning/phases/01-editor-foundation/01-07-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create static technique library JSON</name>
  <files>src/data/techniques.json</files>
  <action>
    Create src/data/techniques.json with 12 common phishing techniques from MITRE ATT&CK.

    Use this structure for each technique:
    ```json
    {
      "id": "T1566.001",
      "name": "Spearphishing Attachment",
      "tactic": "Initial Access",
      "description": "Adversaries send spearphishing emails with malicious attachments to gain access."
    }
    ```

    Include these 12 techniques (from 02-RESEARCH.md):
    1. T1566.001 - Spearphishing Attachment
    2. T1566.002 - Spearphishing Link
    3. T1566.003 - Spearphishing via Service
    4. T1566.004 - Spearphishing Voice (Vishing)
    5. T1566 - Phishing (Generic)
    6. T1598.001 - Spearphishing Service (Reconnaissance)
    7. T1659 - Content Injection
    8. T1098.002 - Additional Email Delegate Permissions
    9. T1098.003 - Additional Cloud Roles
    10. T1583.004 - Malvertising
    11. T1199 - Trusted Relationship
    12. T1078.002 - Valid Accounts: Domain Accounts

    Use proper JSON formatting (no trailing commas, double quotes).
  </action>
  <verify>
    File exists at src/data/techniques.json with 12 techniques, each with id, name, tactic, description fields. Validate with `node -e "JSON.parse(require('fs').readFileSync('src/data/techniques.json'))"`
  </verify>
  <done>
    Static technique library JSON file created with 12 MITRE ATT&CK techniques ready for import into components.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create annotation TypeScript types</name>
  <files>src/types/annotations.ts</files>
  <action>
    Create src/types/annotations.ts defining the Annotation interface.

    Export this interface:
    ```typescript
    export interface Annotation {
      lureId: string              // Matches data-lure-id attribute in HTML
      techniqueName: string        // Human-readable technique name
      mitreAttackId: string        // MITRE ATT&CK ID (e.g., "T1566.001")
      explanation: string          // User-written explanation
      createdAt: string            // ISO timestamp
    }
    ```

    Also export a type for the technique library structure:
    ```typescript
    export interface Technique {
      id: string
      name: string
      tactic: string
      description: string
    }
    ```

    Follow TypeScript best practices: use explicit string types, export interfaces for reuse in components.
  </action>
  <verify>
    TypeScript compilation succeeds: `npx tsc --noEmit`. Check for type errors in src/types/annotations.ts.
  </verify>
  <done>
    Annotation and Technique types defined and exported for use throughout the application.
  </done>
</task>

</tasks>

<verification>
- techniques.json contains exactly 12 techniques with valid MITRE ATT&CK IDs
- JSON validates without syntax errors
- Annotation type has all required fields (lureId, techniqueName, mitreAttackId, explanation, createdAt)
- TypeScript compilation passes
</verification>

<success_criteria>
Static data foundation exists and is type-safe. Components can now import techniques and Annotation type.
</success_criteria>

<output>
After completion, create `.planning/phases/02-technique-annotations/02-01-SUMMARY.md`
</output>
