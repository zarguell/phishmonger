---
phase: 14-sample-campaign
plan: 02
type: execute
wave: 2
depends_on: [14-01]
files_modified:
  - src/components/campaign/CampaignManager.tsx
autonomous: true
user_setup: []

must_haves:
  truths:
    - "User can click 'Load Sample Campaign' button in campaign manager"
    - "Sample campaign appears in campaign list after clicking button"
    - "Duplicate sample campaigns are prevented (alert shown if already exists)"
    - "Sample campaign name clearly indicates it's demo content"
    - "Button is visually distinct from existing Create/Import buttons"
  artifacts:
    - path: "src/components/campaign/CampaignManager.tsx"
      provides: "Load Sample Campaign button and handler"
      exports: ["handleLoadSample"]
      min_lines: 20
  key_links:
    - from: "src/components/campaign/CampaignManager.tsx"
      to: "src/data/sampleCampaign.ts"
      via: "import SAMPLE_CAMPAIGN"
      pattern: "import.*SAMPLE_CAMPAIGN.*from.*sampleCampaign"
    - from: "src/components/campaign/CampaignManager.tsx"
      to: "useCampaigns hook"
      via: "addCampaign() call"
      pattern: "addCampaign\\(SAMPLE_CAMPAIGN\\)"
    - from: "Load Sample button onClick"
      to: "duplicate detection"
      via: "Array.find() check"
      pattern: "campaigns\\.find\\(c => c\\.name\\.includes\\('Sample'\\)"
---

<objective>
Add "Load Sample Campaign" button to CampaignManager that loads the sample campaign with duplicate detection.

Purpose: Provides one-click access to demo content so users can explore features immediately. Duplicate detection prevents loading multiple copies.

Output: CampaignManager with new "Load Sample Campaign" button in the filter bar.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/14-sample-campaign/14-CONTEXT.md
@.planning/phases/14-sample-campaign/14-RESEARCH.md

@src/components/campaign/CampaignManager.tsx
@src/hooks/useCampaigns.ts
@src/data/sampleCampaign.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Load Sample Campaign button to CampaignManager</name>
  <files>src/components/campaign/CampaignManager.tsx</files>
  <action>
    Modify src/components/campaign/CampaignManager.tsx:

    1. **Import SAMPLE_CAMPAIGN** at top of file:
       ```typescript
       import { SAMPLE_CAMPAIGN } from '../../data/sampleCampaign';
       ```

    2. **Add handleLoadSample function** after handleCreateCancel (around line 160):
       ```typescript
       const handleLoadSample = () => {
         // Check if sample campaign already exists
         const existing = campaigns.find(c =>
           c.name === SAMPLE_CAMPAIGN.name ||
           c.name.includes('Sample Campaign') ||
           c.name.includes('Demo')
         );

         if (existing) {
           alert('Sample campaign already loaded. Edit the existing one or delete it first.');
           return;
         }

         // Use existing addCampaign function
         addCampaign({
           name: SAMPLE_CAMPAIGN.name,
           description: SAMPLE_CAMPAIGN.description,
           campaignPhishes: SAMPLE_CAMPAIGN.campaignPhishes,
         });
       };
       ```

    3. **Add Load Sample button** in filter bar (after Import button, around line 274):
       ```typescript
       <button
         onClick={handleLoadSample}
         style={{
           padding: '8px 16px',
           backgroundColor: '#8b5cf6',
           color: 'white',
           border: 'none',
           borderRadius: '6px',
           fontSize: '14px',
           fontWeight: '500',
           cursor: 'pointer',
         }}
       >
         Load Sample Campaign
       </button>
       ```

    BUTTON STYLING:
    - Purple color (#8b5cf6) to distinguish from Create (blue #0066cc) and Import (gray)
    - Same padding and border-radius as other buttons for consistency
    - Positioned between Import and the error message area

    DUPLICATE DETECTION:
    - Checks for exact name match OR name containing 'Sample Campaign' OR 'Demo'
    - Shows user-friendly alert if already exists
    - Prevents creating duplicate sample campaigns

    DO NOT:
    - Modify the existing addCampaign function (use as-is)
    - Change the Create or Import button behavior
    - Add modal for loading sample (direct button action is simpler)
  </action>
  <verify>
    1. Run `npm run dev`
    2. Open Campaigns modal
    3. Verify "Load Sample Campaign" button appears (purple color) next to Import button
    4. Click button - sample campaign should appear in list
    5. Click button again - alert should say "Sample campaign already loaded"
    6. Delete sample campaign, click button again - should reload successfully
  </verify>
  <done>
    Load Sample Campaign button in CampaignManager filter bar. Clicking loads sample campaign to localStorage and shows in list. Duplicate detection prevents multiple loads. Button visually distinct (purple).
  </done>
</task>

</tasks>

<verification>
After completion, verify:
- [ ] "Load Sample Campaign" button visible in CampaignManager filter bar
- [ ] Button has purple color (#8b5cf6) to distinguish from other buttons
- [ ] Clicking button adds sample campaign to localStorage
- [ ] Sample campaign appears in campaign list after clicking
- [ ] Clicking button again shows alert about existing sample
- [ ] Deleting sample and clicking again reloads successfully
- [ ] No console errors during load operation
</verification>

<success_criteria>
- [ ] Load Sample Campaign button added to CampaignManager
- [ ] Button imports and uses SAMPLE_CAMPAIGN from sampleCampaign.ts
- [ ] Duplicate detection prevents multiple loads
- [ ] Sample campaign persists to localStorage via addCampaign
- [ ] User-friendly alert on duplicate load attempt
</success_criteria>

<output>
After completion, create `.planning/phases/14-sample-campaign/14-02-SUMMARY.md`
</output>
