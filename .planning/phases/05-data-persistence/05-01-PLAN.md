---
phase: 05-data-persistence
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/types/project.ts
  - src/components/ProjectSettings.tsx
autonomous: true

must_haves:
  truths:
    - "User can input project title and author in settings panel"
    - "Application automatically generates created timestamp on first load"
    - "Project metadata persists to LocalStorage"
    - "Previous project metadata loads automatically on return visit"
  artifacts:
    - path: "src/types/project.ts"
      provides: "ProjectMetadata type definition"
      contains: "interface ProjectMetadata"
    - path: "src/components/ProjectSettings.tsx"
      provides: "Settings UI for title and author input"
      min_lines: 50
  key_links:
    - from: "src/components/ProjectSettings.tsx"
      to: "App.tsx"
      via: "onUpdate prop callback"
      pattern: "onUpdate.*metadata"
---

<objective>
Create project metadata type definition and ProjectSettings component for title and author input

Purpose: Enable users to identify their phishing analysis projects with title and author, supporting data persistence and export functionality
Output: ProjectMetadata type, ProjectSettings component with form inputs, LocalStorage integration
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS.md

@.planning/phases/04-nist-phish-scale-scoring/04-02-SUMMARY.md

@src/App.tsx
@src/utils/storage.ts
@src/types/annotations.ts
@src/types/scoring.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ProjectMetadata type definition</name>
  <files>src/types/project.ts</files>
  <action>
    Create src/types/project.ts with ProjectMetadata interface:

    ```typescript
    export interface ProjectMetadata {
      title: string
      author: string
      createdAt: string  // ISO 8601 timestamp
      updatedAt?: string // ISO 8601 timestamp (optional)
    }
    ```

    Use string for timestamps (ISO format) for JSON serialization compatibility with LocalStorage.
  </action>
  <verify>cat src/types/project.ts | grep -q "interface ProjectMetadata" && grep -q "createdAt: string"</verify>
  <done>ProjectMetadata type exists with title, author, createdAt fields</done>
</task>

<task type="auto">
  <name>Task 2: Create ProjectSettings component</name>
  <files>src/components/ProjectSettings.tsx</files>
  <action>
    Create ProjectSettings component in src/components/ProjectSettings.tsx:

    Props:
    - metadata: ProjectMetadata (current metadata)
    - onUpdate: (metadata: ProjectMetadata) => void

    UI structure:
    - Section header: "Project Settings"
    - Title input: Text field for project title (label: "Project Title")
    - Author input: Text field for author name (label: "Author")
    - Created date display: Read-only text showing "Created: {formatted date}"

    Styling:
    - Use existing form input styles from app-header or create consistent inline styles
    - Display-only createdAt field (user cannot edit)
    - Inputs use standard text fields with borders and padding

    Input handling:
    - Update metadata.onUpdate() when title or author changes
    - Pass full ProjectMetadata object back to parent
  </action>
  <verify>cat src/components/ProjectSettings.tsx | grep -q "ProjectSettings" && grep -q "onUpdate"</verify>
  <done>ProjectSettings component renders title/author inputs and displays createdAt</done>
</task>

<task type="auto">
  <name>Task 3: Add metadata storage utilities</name>
  <files>src/utils/storage.ts</files>
  <action>
    Add to src/utils/storage.ts:

    ```typescript
    const METADATA_KEY = 'phishmonger-metadata'

    export const loadMetadata = (): ProjectMetadata => {
      try {
        const saved = localStorage.getItem(METADATA_KEY)
        if (saved) {
          const parsed = JSON.parse(saved)
          return {
            title: parsed.title || 'Untitled Project',
            author: parsed.author || '',
            createdAt: parsed.createdAt || new Date().toISOString()
          }
        }
      } catch (error) {
        console.error('Failed to load metadata:', error)
      }
      // Default metadata for new projects
      return {
        title: 'Untitled Project',
        author: '',
        createdAt: new Date().toISOString()
      }
    }

    export const saveMetadata = (metadata: ProjectMetadata) => {
      try {
        const toSave = {
          ...metadata,
          updatedAt: new Date().toISOString()
        }
        localStorage.setItem(METADATA_KEY, JSON.stringify(toSave))
      } catch (error) {
        console.error('Failed to save metadata:', error)
      }
    }
    ```

    Import ProjectMetadata type from '../types/project'.
    Auto-generate createdAt for new projects, add updatedAt on save.
  </action>
  <verify>grep -q "loadMetadata" src/utils/storage.ts && grep -q "saveMetadata" src/utils/storage.ts</verify>
  <done>loadMetadata() loads or creates default metadata, saveMetadata() saves with updatedAt</done>
</task>

</tasks>

<verification>
- TypeScript compilation passes: npm run build
- ProjectSettings component imports without errors
- loadMetadata() returns valid ProjectMetadata with createdAt timestamp
- saveMetadata() saves to 'phishmonger-metadata' key with updatedAt
</verification>

<success_criteria>
1. ProjectMetadata type defined in src/types/project.ts
2. ProjectSettings component renders title/author inputs
3. Created date displays read-only from metadata
4. loadMetadata() loads existing or creates new metadata with createdAt
5. saveMetadata() persists metadata to LocalStorage with updatedAt
</success_criteria>

<output>
After completion, create `.planning/phases/05-data-persistence/05-01-SUMMARY.md`
</output>
