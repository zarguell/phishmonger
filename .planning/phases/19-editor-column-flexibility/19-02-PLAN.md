---
phase: 19-editor-column-flexibility
plan: 02
type: execute
wave: 2
depends_on: [19-01]
files_modified:
  - src/index.css
autonomous: true
user_setup: []

must_haves:
  truths:
    - "Focused column occupies full width of .app-main grid container"
    - "Non-focused columns collapse to 0 width when a column is focused"
    - "Minimized columns show only header bar with expand button"
    - "CSS Grid responds to data-focus-column attribute changes"
    - "Column content hides when minimized (except header)"
  artifacts:
    - path: "src/index.css"
      provides: "CSS Grid variants for column focus states and minimized column styles"
      contains: ".app-main[data-focus-column="
    - path: "src/App.tsx"
      provides: "data-focus-column attribute binding on .app-main"
      contains: 'data-focus-column={focusedColumn}'
  key_links:
    - from: "src/App.tsx"
      to: ".app-main element"
      via: "data-focus-column attribute"
      pattern: 'data-focus-column=\{focusedColumn\}'
    - from: "src/index.css"
      to: "grid columns"
      via: "grid-template-columns selectors"
      pattern: "grid-template-columns.*1fr.*0.*0.*0"
---

<objective>
Implement CSS Grid conditional layouts and minimized column behavior so columns expand/collapse based on focus state.

Purpose: Apply visual changes when column state changes - focused column becomes full-width, other columns hide.
Output: Clicking expand button visually expands column to full-width; minimize button collapses column to header bar.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/19-editor-column-flexibility/19-RESEARCH.md
@src/index.css
@.planning/phases/19-editor-column-flexibility/19-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Add CSS Grid focus variants to index.css</name>
  <files>src/index.css</files>
  <action>
    Add to src/index.css after .app-main rule (after line 42):

    1. Add transition property to existing .app-main:
       ```css
       transition: all 0.3s ease;
       ```

    2. Add focus variants (each column focused = full-width):
       ```css
       /* Input column focused */
       .app-main[data-focus-column="input"] {
         grid-template-columns: 1fr 0 0 0;
       }

       /* Preview column focused */
       .app-main[data-focus-column="preview"] {
         grid-template-columns: 0 1fr 0 0;
       }

       /* Lure list column focused */
       .app-main[data-focus-column="lure-list"] {
         grid-template-columns: 0 0 1fr 0;
       }

       /* Scoring column focused */
       .app-main[data-focus-column="scoring"] {
         grid-template-columns: 0 0 0 1fr;
       }
       ```

    3. Add column visibility helper (hidden columns shouldn't overflow):
       ```css
       .app-main > div {
         min-width: 0;
         overflow: hidden;
       }
       ```

    Follow research pattern (RESEARCH.md lines 184-209).
    Do NOT modify .app-main base grid-template-columns - keep existing `1fr 1fr 300px 280px`.
  </action>
  <verify>grep -q 'data-focus-column="input"' src/index.css && grep -q 'grid-template-columns: 1fr 0 0 0' src/index.css</verify>
  <done>CSS Grid variants exist for all 4 focus states with transition animation</done>
</task>

<task type="auto">
  <name>Add column header and minimized styles to index.css</name>
  <files>src/index.css</files>
<action>
    Add to src/index.css (after scoring-column styles, around line 189):

    1. Add column header styles:
       ```css
       .column-header {
         display: flex;
         align-items: center;
         justify-content: space-between;
         padding: 8px 12px;
         background: #f5f7fa;
         border: 1px solid #e1e5e9;
         border-radius: 4px;
         cursor: pointer;
         user-select: none;
         margin-bottom: 0.5rem;
       }

       .column-header:hover {
         background: #e9ecef;
       }

       .column-header-title {
         font-size: 13px;
         font-weight: 600;
         color: #2c3e50;
       }

       .expand-minimize-buttons {
         display: flex;
         gap: 4px;
       }

       .expand-minimize-btn {
         padding: 4px 8px;
         font-size: 11px;
         background: #ffffff;
         border: 1px solid #dee2e6;
         border-radius: 3px;
         cursor: pointer;
         transition: background 0.2s;
         min-width: 24px;
       }

       .expand-minimize-btn:hover {
         background: #e9ecef;
       }
       ```

    2. Add minimized column state (for future use - full collapse behavior):
       ```css
       .column-minimized {
         display: flex;
         flex-direction: column;
         min-height: 40px;
         overflow: hidden;
       }

       .column-minimized > *:not(.column-header) {
         display: none;
       }
       ```

    Follow research pattern (RESEARCH.md lines 212-263).
  </action>
  <verify>grep -q ".column-header" src/index.css && grep -q ".expand-minimize-btn" src/index.css</verify>
  <done>Column header buttons styled consistently with existing app UI</done>
</task>

<task type="auto">
  <name>Bind data-focus-column attribute in App.tsx</name>
  <files>src/App.tsx</files>
  <action>
    Modify src/App.tsx:

    1. Find the .app-main element in edit mode return (around line 627)
    2. Add data-focus-column attribute:
       ```typescript
       <main className="app-main" data-focus-column={focusedColumn || undefined}>
       ```

    This links the focusedColumn state to CSS Grid selectors.

    Also ensure column headers are rendered at the top of each column div:
    - Inside input-column div, before mode-toggle
    - Inside preview-column div, before Preview component
    - Inside lure-list-column div, before LureList component
    - Inside scoring-column div, before ScoringPanel component

    Each header gets:
    - title: "Email Input" / "Preview" / "Annotations" / "Scoring"
    - columnId: 'input' / 'preview' / 'lure-list' / 'scoring'
    - onExpand: () => expandColumn(columnId)
    - onMinimize: () => minimizeColumn(columnId)
  </action>
  <verify>grep -q 'data-focus-column' src/App.tsx</verify>
  <done>.app-main element has data-focus-column attribute bound to focusedColumn state</done>
</task>

</tasks>

<verification>
1. TypeScript compiles: npm run type-check
2. CSS selectors exist: grep -c "data-focus-column" src/index.css returns 4+
3. App binds attribute: grep "data-focus-column" src/App.tsx
4. Manual test: Click expand button on input column -> input column expands to full width, other columns collapse
</verification>

<success_criteria>
1. Clicking expand (+) button on any column expands that column to full-width
2. Other columns collapse (width becomes 0) when a column is focused
3. CSS transition animates the layout change smoothly
4. Column headers remain visible and styled correctly
</success_criteria>

<output>
After completion, create `.planning/phases/19-editor-column-flexibility/19-02-SUMMARY.md`
</output>
