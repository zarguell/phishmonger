---
phase: 14-sample-campaign
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/data/sampleCampaign.json
autonomous: true
user_setup: []

must_haves:
  truths:
    - "Sample campaign JSON file exists with valid Campaign structure"
    - "Sample campaign contains 3-4 diverse phishing examples"
    - "Each phish has 1-2 annotations demonstrating technique mapping"
    - "All lure IDs in HTML match annotation lureId fields"
    - "All technique IDs reference valid techniques from techniques.json"
    - "All persuasion IDs reference valid principles from persuasion.json"
    - "Scheduled dates are provided for demo calendar export"
  artifacts:
    - path: "src/data/sampleCampaign.json"
      provides: "Static sample campaign data"
      min_lines: 100
    - path: "src/data/sampleCampaign.ts"
      provides: "TypeScript wrapper for type-safe import"
      min_lines: 5
  key_links:
    - from: "src/data/sampleCampaign.ts"
      to: "src/data/sampleCampaign.json"
      via: "JSON import with type assertion"
      pattern: "import.*from.*sampleCampaign\\.json"
    - from: "src/data/sampleCampaign.json"
      to: "src/data/techniques.json"
      via: "techniqueId references"
      pattern: "\"techniqueId\":\\s*\"T[0-9]+\\.[0-9]+\""
    - from: "src/data/sampleCampaign.json"
      to: "src/data/persuasion.json"
      via: "persuasionPrincipleId references"
      pattern: "\"persuasionPrincipleId\":\\s*\"CIAL-[0-9]+\""
---

<objective>
Create sample campaign JSON file with 3-4 diverse, well-annotated phishing examples that users can load to explore Phish Monger's features.

Purpose: Provides placeholder demo content so users can immediately explore campaign features without manual setup. This is lightweight content that users will replace with their own examples.

Output: Static `src/data/sampleCampaign.json` file with TypeScript wrapper for type-safe imports.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/14-sample-campaign/14-CONTEXT.md
@.planning/phases/14-sample-campaign/14-RESEARCH.md

@src/types/campaign.ts
@src/types/phish.ts
@src/types/annotations.ts
@src/types/project.ts
@src/types/scoring.ts
@src/data/techniques.json
@src/data/persuasion.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create sample campaign JSON with TypeScript wrapper</name>
  <files>src/data/sampleCampaign.json, src/data/sampleCampaign.ts</files>
  <action>
    Create two files:

    1. **src/data/sampleCampaign.json** - Sample campaign with 3-4 phishes demonstrating:
       - **Phish 1: Urgent Account Verification** - IT Support impersonation with urgency (T1566.002 + CIAL-01, CIAL-02)
       - **Phish 2: CEO Document Request** - Business email compromise with authority (T1598 + CIAL-01, CIAL-05)
       - **Phish 3: Fake SharePoint Notice** - Service impersonation with curiosity (T1566.003 + CIAL-07)
       - **Phish 4 (optional): Invoice Refund** - Financial reciprocity scam (T1566.002 + CIAL-05, CIAL-02)

    Each phish must include:
    - **id**: Unique UUID (use crypto.randomUUID() format)
    - **metadata**: title, author ("Phish Monger Team"), createdAt (ISO 8601)
    - **htmlSource**: Brief email (2-3 sentences) with 1-2 lure mark spans: `<span data-lure-id="lure-X" class="lure-mark">highlighted text</span>`
    - **annotations**: 1-2 annotations per phish with matching lureId, valid techniqueId, optional persuasionPrincipleId
    - **scoring**: NIST Phish Scale values (visualCues, languageCues, premiseAlignment)
    - **inputMode**: "richtext"
    - **scheduledDate**: ISO 8601 date string (e.g., "2026-03-15") for calendar export demo

    Campaign structure:
    - **id**: Unique UUID
    - **name**: "Sample Campaign (Demo)" - clearly labeled as sample
    - **description**: Brief 1-sentence explanation of what features it demonstrates
    - **createdAt**: ISO 8601 timestamp
    - **campaignPhishes**: Array of the phishes above

    Annotation tone: Casual, friendly, educational (not overly technical)
    Email content: Brief, focused on the lure itself

    2. **src/data/sampleCampaign.ts** - TypeScript wrapper:
    ```typescript
    import { Campaign } from '../types/campaign';
    import sampleData from './sampleCampaign.json';

    export const SAMPLE_CAMPAIGN: Campaign = sampleData as Campaign;
    ```

    VALIDATION REQUIREMENTS:
    - Every `data-lure-id="X"` in HTML must have matching annotation with `lureId: "X"`
    - All techniqueIds must exist in techniques.json (T1566.001, T1566.002, T1598, T1036.005, etc.)
    - All persuasionPrincipleIds must exist in persuasion.json (CIAL-01 through CIAL-07)
    - All required fields present (id, metadata, htmlSource, annotations, scoring, inputMode)

    DO NOT:
    - Create overly long emails (keep to 2-3 sentences)
    - Add more than 2 annotations per phish (user requested "light" density)
    - Use technical jargon (keep tone casual and accessible)
  </action>
  <verify>
    1. Run `npm run dev` to confirm app starts without JSON parsing errors
    2. Check browser console for no "Failed to fetch" or "Invalid campaign" errors
    3. In browser console, run:
       ```js
       import('./src/data/sampleCampaign.ts').then(m => console.log(m.SAMPLE_CAMPAIGN))
       ```
       Verify Campaign object logs with all required fields
    4. Verify lure count: Object.keys(SAMPLE_CAMPAIGN.campaignPhishes).length >= 3
  </verify>
  <done>
    Sample campaign JSON exists with 3-4 valid phishes. Each phish has 1-2 annotations. All lure IDs match. All technique/persuasion IDs reference valid data. TypeScript wrapper provides type-safe import.
  </done>
</task>

</tasks>

<verification>
After completion, verify:
- [ ] TypeScript compilation succeeds (no type errors)
- [ ] All required Campaign fields present (id, name, description, createdAt, campaignPhishes)
- [ ] All required Phish fields present (id, metadata, htmlSource, annotations, scoring, inputMode)
- [ ] Each phish has 1-2 annotations (light density per CONTEXT.md)
- [ ] All data-lure-id attributes have matching annotation lureId values
- [ ] All techniqueIds exist in techniques.json
- [ ] All persuasionPrincipleIds exist in persuasion.json (if present)
- [ ] Email content is brief (2-3 sentences per phish)
- [ ] Annotation tone is casual and friendly
</verification>

<success_criteria>
- [ ] Sample campaign JSON file created at src/data/sampleCampaign.json
- [ ] TypeScript wrapper created at src/data/sampleCampaign.ts
- [ ] Sample campaign has 3-4 phishes demonstrating variety (urgency, authority, service impersonation)
- [ ] Each phish has 1-2 annotations with valid technique/persuasion references
- [ ] All lure IDs in HTML match annotation lureId fields (no orphans)
- [ ] App compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/14-sample-campaign/14-01-SUMMARY.md`
</output>
